(function(t){function e(e){for(var r,c,l=e[0],a=e[1],s=e[2],_=0,h=[];_<l.length;_++)c=l[_],Object.prototype.hasOwnProperty.call(i,c)&&i[c]&&h.push(i[c][0]),i[c]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(t[r]=a[r]);d&&d(e);while(h.length)h.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,l=1;l<n.length;l++){var a=n[l];0!==i[a]&&(r=!1)}r&&(o.splice(e--,1),t=c(c.s=n[0]))}return t}var r={},i={app:0},o=[];function c(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=t,c.c=r,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)c.d(n,r,function(e){return t[e]}.bind(null,r));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],a=l.push.bind(l);l.push=e,l=l.slice();for(var s=0;s<l.length;s++)e(l[s]);var d=a;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1:function(t,e){},2:function(t,e){},"2d13":function(t,e,n){},3:function(t,e){},3653:function(t,e,n){},4:function(t,e){},5:function(t,e){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),i=(n("b64b"),n("fb6a"),{class:"navbar navbar-expand-sm bg-light navbar-hover"}),o={class:"collapse navbar-collapse"},c={class:"navbar-nav mr-auto"},l={class:"nav-item dropdown"},a=Object(r["f"])("button",{class:"dropdown-toggle btn",id:"browse_samples","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}," Browse Samples ",-1),s={class:"dropdown-menu"},d={class:"dropdown-item dropdown-toggle"},_={class:"dropdown-menu"},h={key:0},u={class:"navbar-nav"},p={class:"nav-item"},f={class:"btn",disabled:""},g=Object(r["f"])("br",null,null,-1),m=Object(r["f"])("li",{class:"nav-item"},[Object(r["f"])("a",{tabindex:"0",class:"btn",role:"button","data-toggle":"popover","data-trigger":"focus",title:"Help",rel:"popover","data-content":"\n        Playback: <br> \n        <ul>\n          <li>r: reset</li>\n          <li>n: new sample</li>\n        </ul>\n        Input-Fixed: <br> \n        <ul>\n          <li>Mouse</li>\n          <ul>\n            <li>left click: select a major triad</li>\n            <li>right click: select a minor triad</li>\n            <li>middle click or (shift + left click): select a dominant 7th chord</li>\n            <li>alt + left/right click: select a major/minor 7th chord</li>\n          </ul>\n          <li>Keyboard</li>\n          <ul>\n            <li>'1'-'=': select root</li>\n            <li>shift + root: major triad</li>\n            <li>ctrl + root: minor triad</li>\n            <li>alt + root: moninant 7th chord</li>\n            <li>alt+ shift/ctrl + root: major/minor 7th chord</li>\n          </ul>\n        </ul>\n        Input-Movable: <br> \n        <ul>\n          <li>Mouse</li>\n          <ul>\n            <li>left click: select a triad corresponding the the scale degree</li>\n            <li>shift + left click: select a major triad</li>\n            <li>ctrl + left click: select a minor triad</li>\n            <li>alt + left click: select a dominant seventh chord</li>\n            <li>alt + shift/ctrl + left click: select a major/minor seventh chord</li>\n          </ul>\n          <li>Keyboard</li>\n          <ul>\n            <li>1-7: select a triad corresponding the the scale degree</li>\n            <li>shift + 1-7: select a major triad</li>\n            <li>ctrl + 1-7: select a minor triad</li>\n            <li>alt + 1-7: select a dominant seventh chord</li>\n            <li>alt + shift/ctrl + 1-7: select a major/minor seventh chord</li>\n          </ul>\n        </ul>\n        ","data-html":"true"}," Help "),Object(r["f"])("br")],-1),b={class:"container-fluid pt-3 pb-5",id:"main_app"},v={id:"time_steps",class:"table table-fixed prog_table"},y={class:"thead-light"},O=Object(r["f"])("th",{class:"prog_head table_cell"},null,-1),j=Object(r["f"])("th",{class:"time_cell"},null,-1),k=Object(r["f"])("th",{class:"time_cell"},null,-1),x={class:"up"},w=Object(r["f"])("svg",{class:"original_svg svg right",height:"0px"},null,-1),q={class:"up"},I={id:"original_prog",class:"table table-fixed table-striped prog_table"},E=Object(r["f"])("th",null,null,-1),S=Object(r["f"])("th",null,null,-1),T={id:"altered_time_steps",class:"table table-fixed prog_table"},M={class:"thead-light"},D=Object(r["f"])("th",{class:"prog_head table_cell"},null,-1),P=Object(r["f"])("th",{class:"time_cell"},null,-1),C=Object(r["f"])("th",{class:"time_cell"},null,-1),B=Object(r["f"])("canvas",{id:"altered_canvas",class:"right"},null,-1),A=Object(r["f"])("svg",{class:"swapped_svg svg right",id:"swapped_svg",height:"0px"},null,-1),L={class:"up"},z={id:"saved_prog",class:"table table-fixed table-striped prog_table"},R=Object(r["f"])("th",null,null,-1),H={class:"row"},K={class:"col-4"},N=Object(r["f"])("br",null,null,-1),F=Object(r["e"])(" Bpm: "),$={id:"bpm_text"},Q={id:"slider_container"},X={class:"input-group-prepend"},Y={class:"input-group-text",style:{width:"160px"}},U=Object(r["e"])(),Z=Object(r["f"])("span",null,"   Root overlay",-1),J={class:"input-group-prepend"},G={class:"input-group-text",style:{width:"160px"}},V=Object(r["e"])(),W=Object(r["f"])("span",null,"   Chord overlay",-1),tt={class:"col-3"},et={class:"btn-group"},nt={class:"btn btn-light dropdown-toggle",type:"button","data-toggle":"dropdown"},rt=Object(r["f"])("span",{class:"caret"},null,-1),it={class:"dropdown-menu"},ot={key:0,class:"dropdown"},ct={class:"btn btn-light dropdown-toggle",type:"button","data-toggle":"dropdown"},lt=Object(r["f"])("span",{class:"caret"},null,-1),at={class:"dropdown-menu"},st={key:0},dt=Object(r["f"])("svg",{id:"original_barline",class:"barline_svg"},null,-1),_t=Object(r["f"])("br",null,null,-1),ht=Object(r["f"])("svg",{id:"altered_barline",class:"barline_svg"},null,-1),ut={id:"melacc_toggle"},pt={class:"input-group-prepend"},ft={class:"input-group-text",style:{width:"160px"}},gt=Object(r["e"])(),mt=Object(r["f"])("span",null,"   Melody",-1),bt={class:"input-group-prepend"},vt={class:"input-group-text",style:{width:"160px"}},yt=Object(r["e"])(),Ot=Object(r["f"])("span",null,"   Accompaniment",-1);function jt(t,e,n,jt,kt,xt){var wt=this,qt=Object(r["k"])("midi-visualizer"),It=Object(r["k"])("InterfaceFixed"),Et=Object(r["k"])("InterfaceMovable"),St=Object(r["k"])("midi-player");return Object(r["g"])(),Object(r["c"])("div",null,[Object(r["f"])("nav",i,[Object(r["f"])("div",o,[Object(r["f"])("ul",c,[Object(r["f"])("li",l,[a,Object(r["f"])("ul",s,[Object(r["f"])("li",{id:"resample",onClick:e[1]||(e[1]=function(){return xt.get_data&&xt.get_data.apply(xt,arguments)})},"Random Phrase"),(Object(r["g"])(!0),Object(r["c"])(r["a"],null,Object(r["j"])(Object.keys(this.songData),(function(t){return Object(r["g"])(),Object(r["c"])("li",{key:t},[Object(r["f"])("a",d,"Song "+Object(r["l"])(t)+" "+Object(r["l"])(wt.songData[t]["key"]),1),Object(r["f"])("ul",_,[(Object(r["g"])(!0),Object(r["c"])(r["a"],null,Object(r["j"])(Object.keys(wt.songData[t]),(function(n){return Object(r["g"])(),Object(r["c"])("div",{key:n},["key"!=n?(Object(r["g"])(),Object(r["c"])("div",h,[Object(r["f"])("li",{onClick:e[2]||(e[2]=function(){return xt.get_data&&xt.get_data.apply(xt,arguments)})},[Object(r["f"])("a",{class:"dropdown-item phraseSelect","data-song":t,"data-segment":n}," Segment "+Object(r["l"])(n)+" "+Object(r["l"])(wt.songData[t][n]),9,["data-song","data-segment"])])])):Object(r["d"])("",!0)])})),128))])])})),128))])])]),Object(r["f"])("ul",u,[Object(r["f"])("li",p,[Object(r["f"])("button",f,"Phrase ID: "+Object(r["l"])(this.songID.slice(0,3))+": "+Object(r["l"])(this.songname)+" "+Object(r["l"])(this.songID.slice(4))+" | "+Object(r["l"])(this.songkey),1),g]),m])])]),Object(r["f"])("div",b,[Object(r["f"])("table",v,[Object(r["f"])("thead",y,[Object(r["f"])("tr",null,[O,Object(r["f"])("div",null,[(Object(r["g"])(),Object(r["c"])(r["a"],null,Object(r["j"])(16,(function(t){return Object(r["f"])("th",{class:"time_cell",key:t,id:"time"+(t-1)},Object(r["l"])((t+3-(t-1)%4)/4+"."+((t-1)%4+1)),9,["id"])})),64)),j,k])])])]),Object(r["f"])(qt,{type:"piano-roll",class:"right",id:"original_vis",noteSequence:this.original_noteseq,config:this.cfg},null,8,["noteSequence","config"]),Object(r["f"])("div",x,[Object(r["f"])(qt,{type:"piano-roll",class:"right",id:"original_vis_overlay",noteSequence:this.original_noteseq_overlay,config:this.cfg_mel},null,8,["noteSequence","config"]),w,Object(r["f"])("div",q,[Object(r["f"])("table",I,[Object(r["f"])("tbody",null,[Object(r["f"])("tr",null,[Object(r["f"])("th",{id:"play_prog_original",class:"prog_head",onClick:e[3]||(e[3]=function(){return xt.play_prog_original&&xt.play_prog_original.apply(xt,arguments)})},"Original"),Object(r["f"])("div",null,[(Object(r["g"])(),Object(r["c"])(r["a"],null,Object(r["j"])(16,(function(e){return Object(r["f"])("td",{key:e,id:"original_prog"+(e-1),class:"table_cell",style:{"font-weight":"normal"},onClick:function(t){return xt.play_chord("original",e-1)}},Object(r["l"])(t.original_chd_str[e-1]),9,["id","onClick"])})),64)),E,S])])])]),Object(r["f"])("table",T,[Object(r["f"])("thead",M,[Object(r["f"])("tr",null,[Object(r["f"])("div",null,[D,(Object(r["g"])(),Object(r["c"])(r["a"],null,Object(r["j"])(16,(function(t){return Object(r["f"])("th",{class:"time_cell",key:t,id:"time_altered"+(t-1)},Object(r["l"])((t+3-(t-1)%4)/4+"."+((t-1)%4+1)),9,["id"])})),64)),P,C])])])]),B,A,Object(r["f"])("div",L,[Object(r["f"])("table",z,[Object(r["f"])("tbody",null,[Object(r["f"])("tr",null,[Object(r["f"])("div",null,[Object(r["f"])("th",{id:"play_prog_original",class:"prog_head",onClick:e[4]||(e[4]=function(){return xt.play_prog_altered&&xt.play_prog_altered.apply(xt,arguments)})},"Altered"),(Object(r["g"])(),Object(r["c"])(r["a"],null,Object(r["j"])(16,(function(e){return Object(r["f"])("td",{key:e,id:"altered"+(e-1),class:"table_cell",style:{"font-weight":"normal"},onClick:function(t){return xt.play_chord("altered",e-1)}},Object(r["l"])(t.altered_chd_str[e-1]),9,["id","onClick"])})),64))]),R])])]),Object(r["f"])("div",H,[Object(r["f"])("div",K,[Object(r["f"])("button",{id:"altered_reset",class:"btn btn-light",onClick:e[5]||(e[5]=function(){return xt.player_reset&&xt.player_reset.apply(xt,arguments)})},"Reset"),N,F,Object(r["f"])("span",$,Object(r["l"])(this.bpm),1),Object(r["f"])("div",Q,[Object(r["n"])(Object(r["f"])("input",{type:"range",class:"form-control-range",id:"bpm_slider",min:"30",max:"200","onUpdate:modelValue":e[6]||(e[6]=function(e){return t.bpm=e})},null,512),[[r["m"],t.bpm]])]),Object(r["f"])("div",X,[Object(r["f"])("div",Y,[Object(r["f"])("input",{type:"checkbox",id:"root_overlay",checked:t.root_overlay,onClick:e[7]||(e[7]=function(t){return wt.root_on_click()})},null,8,["checked"]),U,Z])]),Object(r["f"])("div",J,[Object(r["f"])("div",G,[Object(r["f"])("input",{type:"checkbox",id:"chord_overlay",checked:t.chord_overlay,onClick:e[8]||(e[8]=function(t){return wt.chord_on_click()})},null,8,["checked"]),V,W])])]),Object(r["f"])("div",tt,[Object(r["f"])("div",et,[Object(r["f"])("button",nt,[Object(r["e"])(Object(r["l"])("Input type: "+this.input_type)+" ",1),rt]),Object(r["f"])("ul",it,[Object(r["f"])("li",null,[Object(r["f"])("a",{class:"dropdown-item",href:"#",onClick:e[9]||(e[9]=function(t){return xt.change_input_type("movable")})},"Movable")]),Object(r["f"])("li",null,[Object(r["f"])("a",{class:"dropdown-item",href:"#",onClick:e[10]||(e[10]=function(t){return xt.change_input_type("fixed")})},"Fixed")])]),"movable"==this.input_type?(Object(r["g"])(),Object(r["c"])("div",ot,[Object(r["f"])("button",ct,[Object(r["e"])(Object(r["l"])("Key: "+this.key+" major")+" ",1),lt]),Object(r["f"])("ul",at,[Object(r["f"])("li",null,[(Object(r["g"])(!0),Object(r["c"])(r["a"],null,Object(r["j"])(this.scales_major,(function(t){return Object(r["g"])(),Object(r["c"])("a",{key:t,class:"dropdown-item",href:"#",onClick:function(e){return xt.change_key(t)}},Object(r["l"])(t+" major"),9,["onClick"])})),128))])])])):Object(r["d"])("",!0)]),this.loaded?(Object(r["g"])(),Object(r["c"])("div",st,["fixed"==t.input_type?(Object(r["g"])(),Object(r["c"])(It,{key:0,onUpdate_current_chord:xt.update_current_chord},null,8,["onUpdate_current_chord"])):Object(r["d"])("",!0),"movable"==t.input_type?(Object(r["g"])(),Object(r["c"])(Et,{key:1,ref:"dial",interface_key:this.key,roots:t.scales_major,onUpdate_current_chord:xt.update_current_chord},null,8,["interface_key","roots","onUpdate_current_chord"])):Object(r["d"])("",!0)])):Object(r["d"])("",!0)])])])])])]),dt,_t,ht,Object(r["f"])(St,{noteSequence:this.original_noteseq,"sound-font":"",visualizer:"#original_vis",id:"original_player"},null,8,["noteSequence"]),Object(r["f"])("div",ut,[Object(r["f"])("div",pt,[Object(r["f"])("div",ft,[Object(r["f"])("input",{type:"checkbox",id:"root_overlay",checked:t.mel,onClick:e[11]||(e[11]=function(t){return wt.mel_on_click()})},null,8,["checked"]),gt,mt])]),Object(r["f"])("div",bt,[Object(r["f"])("div",vt,[Object(r["f"])("input",{type:"checkbox",id:"chord_overlay",checked:t.acc,onClick:e[12]||(e[12]=function(t){return wt.acc_on_click()})},null,8,["checked"]),yt,Ot])]),Object(r["f"])("button",{onClick:e[13]||(e[13]=function(t){return wt.test()})},"test")])])}var kt=n("b85c"),xt=(n("cb29"),n("b0c0"),n("a15b"),n("99af"),n("ac1f"),n("5319"),n("caad"),Object(r["p"])("data-v-0c3b6279"));Object(r["i"])("data-v-0c3b6279");var wt=Object(r["f"])("p",null,"Current chord:",-1),qt={id:"root_table",class:"table table-bordered table-fixed"};Object(r["h"])();var It=xt((function(t,e,n,i,o,c){return Object(r["g"])(),Object(r["c"])("div",null,[wt,Object(r["f"])("p",{id:"current_chord_text",class:{text_major:"M"==t.current_chord_type,text_minor:"m"==t.current_chord_type,text_dom:"D"==t.current_chord_type}},Object(r["l"])(c.current_chord_text),3),Object(r["f"])("table",qt,[Object(r["f"])("tbody",null,[Object(r["f"])("tr",null,[(Object(r["g"])(),Object(r["c"])(r["a"],null,Object(r["j"])(12,(function(e){return Object(r["f"])("td",{key:e,id:"root_"+e,onClick:function(t){return c.root_on_click(e-1,t)},onContextmenu:Object(r["o"])((function(t){return c.root_on_rightclick(e-1,t)}),["prevent"]),onMouseup:Object(r["o"])((function(t){return c.root_on_middleclick(e-1,t)}),["middle"]),class:{root_cell:!0,root_black:[1,3,6,8,10].includes(e-1),major:"M"==t.current_chord_type&&t.current_chord_root==e-1,minor:"m"==t.current_chord_type&&t.current_chord_root==e-1,dom:"D"==t.current_chord_type&&t.current_chord_root==e-1}},Object(r["l"])(t.roots[e-1]),43,["id","onClick","onContextmenu","onMouseup"])})),64))])])])])})),Et={name:"InterfaceFixed",data:function(){return{roots:["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],current_chord_root:"0",current_chord_type:"M",current_chord_interval:3}},computed:{current_chord_text:function(){return 3==this.current_chord_interval?"M"==this.current_chord_type?this.roots[this.current_chord_root]:this.roots[this.current_chord_root]+this.current_chord_type:"D"==this.current_chord_type?this.roots[this.current_chord_root]+this.current_chord_interval:"M"==this.current_chord_type?this.roots[this.current_chord_root]+"maj"+this.current_chord_interval:this.roots[this.current_chord_root]+this.current_chord_type+this.current_chord_interval}},methods:{root_on_click:function(t,e){e.ctrlKey?this.root_on_rightclick(t,e):(this.current_chord_root=t,this.current_chord_type="M",e.altKey?this.current_chord_interval=7:e.shiftKey&&void 0!=e.movementX?(this.current_chord_type="D",this.current_chord_interval=7):this.current_chord_interval=3,this.$emit("update_current_chord",this.current_chord_root+this.current_chord_type+this.current_chord_interval,this.current_chord_text))},root_on_rightclick:function(t,e){this.current_chord_root=t,this.current_chord_type="m",this.current_chord_interval=3,e.altKey?this.current_chord_interval=7:this.current_chord_interval=3,this.$emit("update_current_chord",this.current_chord_root+this.current_chord_type+this.current_chord_interval,this.current_chord_text)},root_on_middleclick:function(t){this.current_chord_root=t,this.current_chord_type="D",this.current_chord_interval=7,this.$emit("update_current_chord",this.current_chord_root+this.current_chord_type+this.current_chord_interval,this.current_chord_text)},keyboard_functions:function(t){var e=t.key;if(["!","@","#","$","%","^","&","*","(",")","_","+"].includes(e)){t.preventDefault();var n=["!","@","#","$","%","^","&","*","(",")","_","+"].indexOf(e);this.root_on_click(n,t)}else if(["⁄","€","‹","›","ﬁ","ﬂ","‡","°","·","—","±"].includes(e)){t.preventDefault();var r=["⁄","€","‹","›","ﬁ","ﬂ","‡","°","·","—","±"].indexOf(e);this.root_on_click(r,t)}else if(["1","2","3","4","5","6","7","8","9","0","-","="].includes(e)&&t.ctrlKey){t.preventDefault();var i=["1","2","3","4","5","6","7","8","9","0","-","="].indexOf(e);this.root_on_rightclick(i,t)}else if(["1","2","3","4","5","6","7","8","9","0","-","="].includes(e)&&t.altKey){t.preventDefault();var o=["1","2","3","4","5","6","7","8","9","0","-","="].indexOf(e);this.root_on_middleclick(o,t)}else if(["¡","™","£","¢","∞","§","¶","•","ª","º","–","≠"].includes(e)){t.preventDefault();var c=["¡","™","£","¢","∞","§","¶","•","ª","º","–","≠"].indexOf(e);this.root_on_middleclick(c,t)}}},mounted:function(){document.addEventListener("keydown",this.keyboard_functions)},beforeUnmount:function(){document.removeEventListener("keydown",this.keyboard_functions)}};n("dc1a");Et.render=It,Et.__scopeId="data-v-0c3b6279";var St=Et,Tt=Object(r["f"])("svg",{id:"dial_svg"},null,-1);function Mt(t,e,n,i,o,c){return Object(r["g"])(),Object(r["c"])("div",null,[Tt])}var Dt=n("5698"),Pt=n("772f"),Ct=Pt.Note,Bt=Pt.Scale;console.log(Ct,Bt);var At={name:"InterfaceMovable",props:{interface_key:String,roots:Array},data:function(){return{major_scale:[0,2,4,5,7,9,11],current_chord_root:"0",current_chord_type:"M",current_chord_interval:3,dial_r_outer:100,degree_text:["I","ii","iii","IV","V","vi","vii°"],alt:!1,ctrl:!1,shift:!1,s:!1}},computed:{interface_key_idx:function(){return this.roots.indexOf(this.interface_key)},dial_r_center:function(){return this.dial_r_outer/2},dial_r_degrees:function(){return 1.5*this.dial_r_outer},scale_roots:function(){return Bt.get(this.interface_key+" major").notes}},methods:{outer_text:function(t){for(var e=Bt.get(t+" major").notes,n=0;n<3;n++)e[[1,2,5][n]]+="m";return e[6]+="dim",e},draw_dial:function(t){var e=this;Dt.selectAll("g").remove().exit();for(var n=Dt.select("#dial_svg").append("g").attr("class","g").attr("transform","translate("+(this.dial_r_degrees+5)+","+(this.dial_r_degrees+5)+")"),r=this,i=function(i){var o=Dt.arc().innerRadius(e.dial_r_center).outerRadius(e.dial_r_outer).startAngle(2*i*Math.PI/t.length).endAngle(2*(i+1)*Math.PI/t.length);n.append("path").attr("d",o).attr("id","outer_path"+i).attr("class","outer_path").on("click",(function(){r.outer_on_click(i)})).on("contextmenu",(function(t){t.preventDefault(),r.outer_on_click(i)})).on("mouseover",(function(){Dt.select("#outer_path"+i).classed("outer_path_mouseover",!0)})).on("mouseout",(function(){Dt.select("#outer_path"+i).classed("outer_path_mouseover",!1)})),n.append("text").attr("dx",(e.dial_r_outer+e.dial_r_center)/2*Math.cos(2*i*Math.PI/t.length+(1/7-.5)*Math.PI)).attr("dy",(e.dial_r_outer+e.dial_r_center)/2*Math.sin(2*i*Math.PI/t.length+(1/7-.5)*Math.PI)).attr("class","outer_text").attr("id","outer_text"+i).text(t[i]).on("click",(function(){r.outer_on_click(i)})).on("contextmenu",(function(t){t.preventDefault(),r.outer_on_click(i)})).on("mouseover",(function(){Dt.select("#outer_path"+i).classed("outer_path_mouseover",!0)})).on("mouseout",(function(){Dt.select("#outer_path"+i).classed("outer_path_mouseover",!1)})),n.append("text").attr("dx",(e.dial_r_outer+e.dial_r_degrees)/2*Math.cos(2*i*Math.PI/t.length+(1/7-.5)*Math.PI)).attr("dy",(e.dial_r_outer+e.dial_r_degrees)/2*Math.sin(2*i*Math.PI/t.length+(1/7-.5)*Math.PI)).attr("class","outer_text").text(e.degree_text[i])},o=0;o<t.length;o++)i(o);n.append("circle").attr("x",0).attr("y",0).attr("r",this.dial_r_center).attr("class","center_path"),n.append("text").attr("class","center_text").attr("id","center_text").text("")},get_current_chord_text:function(t){return 3==this.current_chord_interval?"M"==this.current_chord_type?t:t+this.current_chord_type:"D"==this.current_chord_type?t+this.current_chord_interval:"M"==this.current_chord_type?t+"maj"+this.current_chord_interval:t+this.current_chord_type+this.current_chord_interval},update_center_text:function(t){var e=Dt.select("#center_text");e.text(t),e.classed("text_major",!1),e.classed("text_minor",!1),e.classed("text_dom",!1),"M"==this.current_chord_type&&Dt.select("#center_text").classed("text_major",!0),"m"==this.current_chord_type&&e.classed("text_minor",!0),"D"==this.current_chord_type&&e.classed("text_dom",!0)},outer_on_click:function(t){this.current_chord_root=(this.major_scale[t]+this.roots.indexOf(this.interface_key))%12;var e=this.scale_roots[t];this.s&&(this.current_chord_root=(this.current_chord_root+7)%12,e=this.scale_roots[(t+4)%7],6==t&&(2==e.length&&"b"==e.charAt(1)?e=e.charAt(0):e+="#"),this.current_chord_interval=7,this.current_chord_type="D"),this.alt?(this.current_chord_interval=7,this.current_chord_type="D",this.shift?this.current_chord_type="M":this.ctrl&&(console.log("CTRL"),this.current_chord_type="m")):this.shift?(this.current_chord_interval=3,this.current_chord_type="M"):this.ctrl?(this.current_chord_interval=3,this.current_chord_type="m"):this.s||(this.current_chord_interval=3,[0,3,4].includes(t)?this.current_chord_type="M":this.current_chord_type="m"),this.update_center_text(this.get_current_chord_text(e)),this.$emit("update_current_chord",this.current_chord_root+this.current_chord_type+this.current_chord_interval,this.get_current_chord_text(e));for(var n=0;n<7;n++)Dt.select("#outer_path"+n).classed("outer_path_active",!1);Dt.select("#outer_path"+t).classed("outer_path_active",!0)},keydown_functions:function(t){var e=t.key;"Alt"==e&&(t.preventDefault(),this.alt=!0),"Shift"==e&&(t.preventDefault(),this.shift=!0),"Control"==e&&(t.preventDefault(),this.ctrl=!0),["S","s"].includes(e)&&(t.preventDefault(),this.s=!0),["1","2","3","4","5","6","7"].includes(e)&&(t.preventDefault(),this.outer_on_click(["1","2","3","4","5","6","7"].indexOf(e))),["!","@","#","$","%","^","&"].includes(e)&&(t.preventDefault(),this.outer_on_click(["!","@","#","$","%","^","&"].indexOf(e))),["¡","™","£","¢","∞","§","¶"].includes(e)&&(t.preventDefault(),this.outer_on_click(["¡","™","£","¢","∞","§","¶"].indexOf(e))),["⁄","€","‹","›","ﬁ","ﬂ","‡"].includes(e)&&(t.preventDefault(),this.outer_on_click(["⁄","€","‹","›","ﬁ","ﬂ","‡"].indexOf(e)))},keyup_functions:function(t){var e=t.key;"Alt"==e&&(t.preventDefault(),this.alt=!1),"Shift"==e&&(t.preventDefault(),this.shift=!1),"Control"==e&&(t.preventDefault(),this.ctrl=!1),["S","s"].includes(e)&&(t.preventDefault(),this.s=!1)}},mounted:function(){this.draw_dial(this.outer_text(this.interface_key)),document.addEventListener("keydown",this.keydown_functions),document.addEventListener("keyup",this.keyup_functions)},beforeUnmount:function(){document.removeEventListener("keydown",this.keydown_functions),document.removeEventListener("keyup",this.keyup_functions)}};n("9c32");At.render=Mt;var Lt=At,zt=n("bc3a").default,Rt=n("5698"),Ht=n("8350"),Kt=n("7360");console.log(Kt);var Nt=new Ht.SoundFontPlayer("https://storage.googleapis.com/magentadata/js/soundfonts/sgm_plus"),Ft=new Ht.MusicRNN("https://storage.googleapis.com/magentadata/js/checkpoints/music_rnn/chord_pitches_improv"),$t={name:"App",components:{InterfaceFixed:St,InterfaceMovable:Lt},data:function(){return{BACKEND_PATH:"http://127.0.0.1:5000",STEP_SIZE:4,scales_major:["C","Db","D","Eb","E","F","F#","G","Ab","A","Bb","B"],prog_step_duration:.5,octave_center:48,acc_velocity:60,mel_velocity:100,songID:"000",songname:"",songkey:"",songData:{},original_noteseq:0,original_noteseq_mixed:0,original_noteseq_mel:0,original_noteseq_acc:0,original_noteseq_overlay:{notes:[{pitch:30,start:0,end:16}],totalTime:16},empty_noteseq:{notes:[{pitch:30,start:0,end:16}],totalTime:16},original_chd_str:0,original_chd_mat:0,notedic:0,notedic_mixed:0,notedic_mel:0,notedic_acc:0,sustain:[],altered_noteseq:{notes:[],totalTime:16},altered_chd_str:Array(16).fill(""),altered_chd_mat:Array(16).fill(Array(36).fill(0)),bpm:60,playing:!1,loaded:!1,input_type:"fixed",key:"C",mel:!1,acc:!0,t:0,chord_seq:[],current_chd:"",current_chd_text:"",altered_vis:0,cfg:{noteHeight:4,pixelsPerTimeStep:100,minPitch:20,maxPitch:90,noteSpacing:1},cfg_mel:{noteHeight:4,pixelsPerTimeStep:100,minPitch:20,maxPitch:90,noteSpacing:1,noteRGB:"255,0,0"},root_overlay:!0,chord_overlay:!1,mel_seq:{notes:[],quantizationInfo:{stepsPerQuarter:4},tempos:[{time:0,qpm:60}],totalQuantizedSteps:256},cur_mel_seq:{notes:[],quantizationInfo:{stepsPerQuarter:4},tempos:[{time:0,qpm:60}],totalQuantizedSteps:64}}},computed:{},methods:{list_to_noteseq:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,r=[],i=0;i<t.length;i++){var o=t[i][0],c=t[i][1],l=t[i][2],a=t[i][3];e>=8&&(o+=8,c+=8),o>=e&&o<n&&r.push({pitch:l,startTime:o,endTime:c,velocity:a})}return r},chords_to_noteseq:function(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=[],r=0;r<t.length;r++){for(var i=t[r],o=[],c=0;c<12;c++)1==i[12+c]&&o.push(c);if(-1==i.slice(0,13).indexOf(1))break;e?n.push([i.slice(0,13).indexOf(1),o,0]):n.push([i.slice(0,13).indexOf(1),o,i.slice(24,36).indexOf(1)])}t=n;var l=[];if(t.length>0){for(var a=t[0],s=this.prog_step_duration,d=1;d<t.length;d++)if(JSON.stringify(t[d])==JSON.stringify(a))s+=this.prog_step_duration;else{for(var _=parseInt(a[0]),h=a[1],u=parseInt(a[2]),p=0;p<h.length;p++)e?l.push({pitch:parseInt(h[p])+_+this.octave_center,startTime:this.prog_step_duration*d-s,endTime:this.prog_step_duration*d}):l.push({pitch:parseInt(h[p])+this.octave_center,startTime:this.prog_step_duration*d-s,endTime:this.prog_step_duration*d});l.push({pitch:u+_+this.octave_center-12,startTime:this.prog_step_duration*d-s,endTime:this.prog_step_duration*d}),a=t[d],s=this.prog_step_duration}for(var f=parseInt(a[0]),g=a[1],m=parseInt(a[2]),b=0;b<g.length;b++)e?l.push({pitch:parseInt(g[b])+f+this.octave_center,startTime:this.prog_step_duration*t.length-s,endTime:this.prog_step_duration*t.length}):l.push({pitch:parseInt(g[b])+this.octave_center,startTime:this.prog_step_duration*t.length-s,endTime:this.prog_step_duration*t.length});return l.push({pitch:m+f+this.octave_center-12,startTime:this.prog_step_duration*t.length-s,endTime:this.prog_step_duration*t.length}),{notes:l,totalTime:this.prog_step_duration*t.length}}},get_songdata:function(){var t=this;zt.get(this.BACKEND_PATH+"/get_songdata").then((function(e){var n=e.data;n.songData||(n=JSON.parse(e.data)),t.songData=n.songData}))},get_data:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"000";"string"!=typeof e&&(e=void 0!=e.target.dataset.song?e.target.dataset.song.slice(0,3)+"_"+e.target.dataset.segment:"000"),zt.get(this.BACKEND_PATH+"/get_data?song="+e).then((function(e){var n=e.data;n.songID||(n=JSON.parse(e.data)),t.songID=n.songID,t.original_noteseq_mixed=n.original_noteseq_mixed,t.original_noteseq_mel=n.original_noteseq_mel,t.original_noteseq_acc=n.original_noteseq_acc,t.original_chd_str=n.original_chd_str,t.original_chd_mat=n.original_chd_mat,t.notedic_mixed=n.notedic_mixed,t.notedic_mel=n.notedic_mel,t.notedic_acc=n.notedic_acc,t.sustain=n.sustain,t.songname=n.name,t.songkey=n.key,t.update_melacc_toggle();for(var r=1;r<4;r++)for(var i=0;i<t.sustain.length;i++){var o=t.sustain[i][0],c=t.sustain[i][1];if(o<4*r&&c>4*r)break;if(o>4*r){i>0?t.sustain[i-1][1]=4*r+1:t.sustain.push([4*r-1,4*r+1]);break}}t.altered_vis=new Ht.PianoRollCanvasVisualizer({notes:[{pitch:30,start:0,end:8}],totalTime:16},document.getElementById("altered_canvas"),t.cfg),t.update_overlay(),t.player_reset(),t.place_barlines_and_player(),setTimeout((function(){t.place_barlines_and_player()}),1e3),setTimeout((function(){t.place_barlines_and_player()}),3e3)}))},player_play:function(){if(this.loaded&&this.playing){if(this.t%this.STEP_SIZE==0&&(0==this.t&&(this.altered_noteseq.notes=[]),this.player_query_step()),!this.playing)return;this.t+=4,16==this.t&&(this.t=0)}},player_reset:function(){this.playing=!1,this.t=0,this.altered_noteseq.notes=[],this.chord_seq=[],this.altered_chd_str=Array(16).fill(""),this.altered_chd_mat=Array(16).fill(Array(36).fill(0)),this.altered_vis.redraw(),this.update_overlay()},player_query_step:function(){var t=this;if(""!=this.current_chd){setTimeout((function(){t.player_play()}),24e4/this.bpm);for(var e=this.t;e<this.t+4;e++)this.highlight_cell("altered"+e,24e4/this.bpm/1e3);var n=function e(n){t.highlight_cell("time_altered"+n,6e4/t.bpm/1e3),n%4!=3&&setTimeout((function(){e(n+1)}),6e4/t.bpm)};n(this.t),0==this.t&&(this.altered_chd_str=Array(16).fill(""),this.altered_chd_mat=Array(16).fill(Array(36).fill(0))),this.t%this.STEP_SIZE==0&&(this.chord_seq=[]),this.chord_seq.push(this.current_chd);var r=parseInt(this.current_chd.slice(0,-2)),i=this.current_chd.slice(-2);this.current_chd="",this.altered_chd_str[this.t]=this.current_chd_text,this.current_chd_text="";for(var o=8/this.STEP_SIZE,c=[],l=0;l<this.chord_seq.length;l++)c.push(this.chord_seq[l]);while(c.length<o)c.push(c[c.length-1]);c=c.join(",");var a=this.notedic[(this.t-this.t%8)/8][c],s=this.list_to_noteseq(a,this.t,this.t+this.STEP_SIZE,!0);this.altered_noteseq.notes=this.altered_noteseq.notes.concat(s);for(var d=this.notes_to_quant_noteseq(s),_=this.t,h=[],u=0;u<this.mel_seq.notes.length;u++)this.mel_seq.notes[u].quantizedStartStep-=64,this.mel_seq.notes[u].quantizedEndStep-=64,this.mel_seq.notes[u].quantizedStartStep>0&&h.push(this.mel_seq.notes[u]);for(var p=0;p<this.cur_mel_seq.notes.length;p++)d.notes.push({pitch:this.cur_mel_seq.notes[p].pitch,quantizedStartStep:this.cur_mel_seq.notes[p].quantizedStartStep,quantizedEndStep:this.cur_mel_seq.notes[p].quantizedEndStep,velocity:this.mel_velocity}),this.cur_mel_seq.notes[p].quantizedStartStep+=192,this.cur_mel_seq.notes[p].quantizedEndStep+=192,h.push(this.cur_mel_seq.notes[p]);this.mel_seq.notes=h,Nt.isPlaying()&&Nt.stop(),Nt.start(d,this.bpm),this.altered_vis.noteSequence=this.altered_noteseq,this.altered_vis.redraw();var f=Array(36).fill(0);f[r]=1,f[24]=1;var g=[0,4,7],m=[0,3,7],b=[0,4,7,11],v=[0,3,7,10],y=[0,4,7,10],O=0;"M3"==i&&(O=g),"m3"==i&&(O=m),"M7"==i&&(O=b),"m7"==i&&(O=v),"D7"==i&&(O=y);for(var j=0;j<O.length;j++)f[(r+O[j])%12+12]=1;for(var k=_;k<_+this.STEP_SIZE;k++)this.altered_chd_mat[k]=f;this.update_overlay()}else this.playing=!1},notes_to_quant_noteseq:function(t){for(var e={notes:[],quantizationInfo:{stepsPerQuarter:4},tempos:[{time:0,qpm:60}],totalQuantizedSteps:64},n=0;n<t.length;n++){for(var r=t[n],i=r.startTime,o=r.endTime,c=0;c<this.sustain.length;c++){var l=this.sustain[c][0],a=this.sustain[c][1];if(r.endTime>l&&r.endTime<a){o=a;break}if(r.endTime<l)break}e.notes.push({pitch:r.pitch,quantizedStartStep:4*(i-this.t),quantizedEndStep:Math.round(4*(o-this.t)),velocity:this.acc_velocity})}return e},canvas_update_note:function(t){var e=this.t;0==e&&(e=16);var n={pitch:t.pitch,startTime:t.startTime+e-4,endTime:t.endTime+e-4};this.altered_vis.redraw(n)},change_input_type:function(t){this.input_type=t},change_key:function(t){this.key=t,this.$refs.dial.draw_dial(this.$refs.dial.outer_text(t))},update_current_chord:function(t,e){if(this.current_chd=t,this.current_chd_text=e,this.playing){var n=parseInt(this.current_chd.slice(0,-2)),r=this.current_chd.slice(-2),i=Array(36).fill(0),o=this.t;i[n]=1,i[n+24]=1;var c=[0,4,7],l=[0,3,7],a=[0,4,7,11],s=[0,3,7,10],d=[0,4,7,10],_=0;"M3"==r&&(_=c),"m3"==r&&(_=l),"M7"==r&&(_=a),"m7"==r&&(_=s),"D7"==r&&(_=d);for(var h=0;h<_.length;h++)i[(n+_[h])%12+12]=1;for(var u=o;u<o+this.STEP_SIZE;u++)this.altered_chd_mat[u]=i;this.update_overlay(),this.altered_chd_str[o]=this.current_chd_text}else this.playing=!0,this.player_play();this.improvise(e)},draw_overlay_bar:function(t,e,n,r){e*=100;while(n<=90)n>=30&&t.append("rect").attr("fill",r).attr("opacity",.3).attr("x",e).attr("y",this.cfg.noteHeight*(this.cfg.maxPitch-n)).attr("width",100).attr("height",4).attr("class","overlay"),n+=12},clear_overlay:function(){Rt.selectAll(".overlay").remove().exit()},get_color:function(t){return Rt.interpolateSinebow((t/12+.6)%1)},draw_root_overlay:function(){for(var t=0;t<this.original_chd_mat.length;t++){var e=this.original_chd_mat[t],n=e.slice(0,12).indexOf(1);this.draw_overlay_bar(Rt.select(".original_svg"),t,n,this.get_color(0)),this.altered_chd_mat[t].slice(0,12).indexOf(1)>=0&&this.draw_overlay_bar(Rt.select(".swapped_svg"),t,this.altered_chd_mat[t].slice(0,12).indexOf(1),this.get_color(0))}},draw_chord_overlay:function(){for(var t=0;t<this.original_chd_mat.length;t++)for(var e=this.original_chd_mat[t],n=e.slice(0,12).indexOf(1),r=0;r<12;r++)1==e[12+r]&&this.draw_overlay_bar(Rt.select(".original_svg"),t,r,this.get_color((r-n)%12)),1==this.altered_chd_mat[t][12+r]&&this.draw_overlay_bar(Rt.select(".swapped_svg"),t,r,this.get_color((r-this.altered_chd_mat[t].slice(0,12).indexOf(1))%12))},update_overlay:function(){this.clear_overlay(),this.chord_overlay?this.draw_chord_overlay():this.root_overlay&&this.draw_root_overlay()},root_on_click:function(){this.root_overlay?this.root_overlay=!1:this.root_overlay=!0,this.update_overlay()},chord_on_click:function(){this.chord_overlay?this.chord_overlay=!1:this.chord_overlay=!0,this.update_overlay()},draw_barlines_original:function(){Rt.selectAll(".barline_original").remove().exit();for(var t=document.getElementById("time0").getBoundingClientRect(),e=document.getElementById("original_prog0").getBoundingClientRect(),n=t.left+window.pageXOffset||document.documentElement.scrollLeft,r=t.right+window.pageXOffset||document.documentElement.scrollLeft,i=t.top+window.pageYOffset||document.documentElement.scrollTop,o=e.bottom+window.pageYOffset||document.documentElement.scrollTop,c=1;c<4;c++)Rt.selectAll("#original_barline").append("rect").attr("x",n+4*c*(r-n)).attr("y",i).attr("width",3).attr("height",o-i).attr("class","barline barline_original")},draw_barlines_altered:function(){Rt.selectAll(".barline_altered").remove().exit();for(var t=document.getElementById("time_altered0").getBoundingClientRect(),e=document.getElementById("altered10").getBoundingClientRect(),n=t.left+window.pageXOffset||document.documentElement.scrollLeft,r=t.right+window.pageXOffset||document.documentElement.scrollLeft,i=t.top+window.pageYOffset||document.documentElement.scrollTop,o=e.bottom+window.pageYOffset||document.documentElement.scrollTop,c=1;c<4;c++)Rt.selectAll("#altered_barline").append("rect").attr("x",n+4*c*(r-n)).attr("y",i).attr("width",3).attr("height",o-i).attr("class","barline barline_altered")},place_player_original:function(){var t=document.getElementById("time15").getBoundingClientRect(),e=document.getElementById("original_prog15").getBoundingClientRect(),n=t.right+window.pageXOffset||document.documentElement.scrollLeft,r=t.top+window.pageYOffset||document.documentElement.scrollTop,i=e.top+window.pageYOffset||document.documentElement.scrollTop;Rt.select("#original_player").style("position","absolute").style("left",n+"px").style("top",(r+2.5*i)/3.5+"px").style("-webkit-transform","scale(0.75)").raise()},place_barlines_and_player:function(){this.draw_barlines_original(),this.draw_barlines_altered(),this.place_player_original(),this.place_melacc_toggle()},mel_on_click:function(){this.mel=!this.mel,this.mel||this.acc||(this.acc=!0),this.update_melacc_toggle()},acc_on_click:function(){this.acc=!this.acc,this.acc||this.mel||(this.mel=!0),this.update_melacc_toggle()},update_melacc_toggle:function(){this.mel&&this.acc?(this.notedic=this.notedic_mixed,this.original_noteseq=this.original_noteseq_mixed,this.original_noteseq_overlay=this.original_noteseq_mel):this.mel?(this.notedic=this.notedic_mel,this.original_noteseq=this.original_noteseq_mel,this.original_noteseq_overlay=this.empty_noteseq):(this.notedic=this.notedic_acc,this.original_noteseq=this.original_noteseq_acc,this.original_noteseq_overlay=this.empty_noteseq)},place_melacc_toggle:function(){var t=document.getElementById("time15").getBoundingClientRect(),e=document.getElementById("original_prog15").getBoundingClientRect(),n=t.left+window.pageXOffset||document.documentElement.scrollLeft,r=t.right+window.pageXOffset||document.documentElement.scrollLeft,i=t.top+window.pageYOffset||document.documentElement.scrollTop,o=e.top+window.pageYOffset||document.documentElement.scrollTop;Rt.select("#melacc_toggle").style("position","absolute").style("left",r+(r-n)/4+"px").style("top",(1.15*i+o)/2.15+"px").style("-webkit-transform","scale(0.6)").raise()},play_chord:function(t,e){Nt.stop();var n=0,r=16;if("original"==t){Nt.start(this.chords_to_noteseq([this.original_chd_mat[e]],!1));for(var i=0;i<16;i++){if(""!=document.getElementById("original_prog"+i).innerHTML.replace(/\s/g,"")&&i>e){r=i;break}""!=document.getElementById("original_prog"+i).innerHTML.replace(/\s/g,"")&&(n=i)}for(var o=n;o<r;o++)this.highlight_cell("original_prog"+o,.5)}if("altered"==t){for(var c=0;c<16;c++){if(""!=document.getElementById("altered"+c).innerHTML.replace(/\s/g,"")&&c>e)break;""!=document.getElementById("altered"+c).innerHTML.replace(/\s/g,"")&&(n=c)}if(n<e-3)return;for(var l=n;l<n+4;l++)this.highlight_cell("altered"+l,.5);Nt.start(this.chords_to_noteseq([this.altered_chd_mat[e]],!1))}},play_prog_original:function(){var t=this;Nt.stop(),Nt.start(this.chords_to_noteseq(this.original_chd_mat,!1));var e=0,n=function n(){if(e<16){if(t.highlight_cell("time"+e,t.prog_step_duration),""!=document.getElementById("original_prog"+e).innerHTML.replace(/\s/g,"")){for(var r=1,i=e+1;i<16;i++){if(""!=document.getElementById("original_prog"+i).innerHTML.replace(/\s/g,""))break;r++}for(var o=e;o<e+r;o++)t.highlight_cell("original_prog"+o,r*t.prog_step_duration)}e++,setTimeout((function(){n()}),1e3*t.prog_step_duration)}};n()},play_prog_altered:function(){var t=this;Nt.stop(),Nt.start(this.chords_to_noteseq(this.altered_chd_mat,!1));var e=0,n=function n(){if(e<16){if(e%4==0&&""==document.getElementById("altered"+e).innerHTML.replace(/\s/g,""))return;if(t.highlight_cell("time_altered"+e,t.prog_step_duration),""!=document.getElementById("altered"+e).innerHTML.replace(/\s/g,""))for(var r=e;r<e+4;r++)t.highlight_cell("altered"+r,4*t.prog_step_duration);e++,setTimeout((function(){n()}),1e3*t.prog_step_duration)}};n()},highlight_cell:function(t,e){document.getElementById(t).classList.add("cell_active"),setTimeout((function(){document.getElementById(t).classList.remove("cell_active")}),1e3*e)},test:function(){var t={notes:[],quantizationInfo:{stepsPerQuarter:4},tempos:[{time:0,qpm:120}],totalQuantizedSteps:4};Ft.continueSequence(t,64,1,["A7"]).then((function(t){console.log(t),Nt.start(t)}))},improvise:function(t){var e=this;Ft.continueSequence(this.mel_seq,64,1,[t]).then((function(t){e.cur_mel_seq=t}))}},mounted:function(){var t=this;this.get_songdata(),this.get_data(),Nt.loadAllSamples().then((function(){t.loaded=!0,t.altered_noteseq.notes=[]}));var e=this;Nt.callbackObject={run:function(t){e.canvas_update_note(t)},stop:function(){}},window.onresize=this.place_barlines_and_player,document.addEventListener("keydown",(function(e){var n=e.key;["r","R"].includes(n)&&t.player_reset(),["n","N"].includes(n)&&t.get_data()}));var n={childList:!0,subtree:!0,attributes:!0},r=document.getElementById("original_player").shadowRoot.querySelector(".current-time"),i=document.getElementById("original_player").shadowRoot.querySelector(".controls");function o(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(t&&(t.classList.add("time_cell_active"),setTimeout((function(){t.classList.contains("time_cell_active")&&t.classList.remove("time_cell_active")}),1e3*n),!e.classList.contains("table_cell_active"))){e.classList.add("table_cell_active");var r=[e],i=n,o=document.getElementById("original_prog"+(1*r[r.length-1].id.slice(13,15)+1));while(o&&""==o.innerHTML.replace(/\s/g,""))o.classList.add("table_cell_active"),r.push(o),o=document.getElementById("original_prog"+(1*r[r.length-1].id.slice(13,15)+1)),i+=n;setTimeout((function(){while(r.length>0){var t=r.pop();t.classList.contains("table_cell_active")&&t.classList.remove("table_cell_active")}}),1e3*i)}}var c=function(t,e){var n,c=Object(kt["a"])(t);try{for(c.s();!(n=c.n()).done;){n.value;if(i.classList.contains("playing")){var l=document.getElementById("time"+1*r.innerHTML.slice(2,4)),a=document.getElementById("original_prog"+1*r.innerHTML.slice(2,4));o(l,a)}}}catch(s){c.e(s)}finally{c.f()}},l=new MutationObserver(c);l.observe(i,n),new Worker("rnn_worker.js"),Ft.initialize()}};n("e526");$t.render=jt;var Qt=$t;Object(r["b"])(Qt).mount("#app")},6:function(t,e){},7:function(t,e){},8:function(t,e){},9:function(t,e){},"9c32":function(t,e,n){"use strict";n("2d13")},a0e8:function(t,e,n){},dc1a:function(t,e,n){"use strict";n("3653")},e526:function(t,e,n){"use strict";n("a0e8")}});
//# sourceMappingURL=app.976f5f96.js.map